var nn=Object.defineProperty;var fr=e=>{throw TypeError(e)};var sn=(e,n,i)=>n in e?nn(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i;var Pe=(e,n,i)=>sn(e,typeof n!="symbol"?n+"":n,i),lr=(e,n,i)=>n.has(e)||fr("Cannot "+i);var b=(e,n,i)=>(lr(e,n,"read from private field"),i?i.call(e):n.get(e)),S=(e,n,i)=>n.has(e)?fr("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(e):n.set(e,i),W=(e,n,i,t)=>(lr(e,n,"write to private field"),t?t.call(e,i):n.set(e,i),i);import"./disclose-version.Bg9kRutz.js";import{aS as an,g as A,D as on,al as ht,_ as un,i as _e,d as D,p as de,f as U,t as Le,a as me,c as Ve,r as Ue,aP as Tr,e as cr,b as dr,aR as Fr}from"./runtime.Bp4x7A-a.js";import{c as B,a as M,b as qe}from"./template.DQ3Ggw9n.js";import{s as ie}from"./snippet.DzwRyOEQ.js";import{c as It}from"./svelte-component.CVO9o64T.js";import{c as se,i as Ze,r as Ee,p as mr,b as Pr,g as pt,e as fn}from"./props.DpK8ESsy.js";import{a as Be,c as Ke}from"./utils.Dqu1-Wdg.js";import{a as Ot,u as ln,b as ce,m as Xt}from"./use-id.B41njTOf.js";import{e as Mr,i as kr}from"./lifecycle.eq67AOaA.js";import"./button.DODvjd4i.js";import{i as cn}from"./utils.Du759zP0.js";import{c as ke,U as Ir,N as dn,P as mn,h as hn,j as Or,k as hr,H as pn,w as re,d as Jt,e as yn,r as Vt,g as gn,b as Ut,a as bn}from"./entry.LQerjGIt.js";import{p as Ge,n as pr}from"./stores.aLhso-j5.js";import{a as mt}from"./37.DRwBbkdK.js";import{e as vn,d as yr}from"./forms.794Ggprv.js";const wn=!0;function ct(e){let n,i=un(0),t=0,u=_e;function o(){return an()?(A(i),on(()=>{if(t===0){let a=!1;u=e.subscribe(d=>{n=d,a&&cn(i)}),a=!0}return t+=1,()=>{ht().then(()=>{t-=1,t===0&&u()})}}),n):ke(e)}return"set"in e?{get current(){return o()},set current(a){e.set(a)}}:{get current(){return o()}}}class Bt extends Error{constructor(n,i){super(n),this.name="DevalueError",this.path=i.join("")}}function gr(e){return Object(e)!==e}const _n=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function En(e){const n=Object.getPrototypeOf(e);return n===Object.prototype||n===null||Object.getOwnPropertyNames(n).sort().join("\0")===_n}function Sn(e){return Object.prototype.toString.call(e).slice(8,-1)}function An(e){switch(e){case'"':return'\\"';case"<":return"\\u003C";case"\\":return"\\\\";case`
`:return"\\n";case"\r":return"\\r";case"	":return"\\t";case"\b":return"\\b";case"\f":return"\\f";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e<" "?`\\u${e.charCodeAt(0).toString(16).padStart(4,"0")}`:""}}function Oe(e){let n="",i=0;const t=e.length;for(let u=0;u<t;u+=1){const o=e[u],a=An(o);a&&(n+=e.slice(i,u)+a,i=u+1)}return`"${i===0?e:n+e.slice(i)}"`}function Tn(e){return Object.getOwnPropertySymbols(e).filter(n=>Object.getOwnPropertyDescriptor(e,n).enumerable)}const Fn=/^[a-zA-Z_$][a-zA-Z_$0-9]*$/;function br(e){return Fn.test(e)?"."+e:"["+JSON.stringify(e)+"]"}function Pn(e,n){const i=[],t=new Map,u=[],o=[];let a=0;function d(l){if(typeof l=="function")throw new Bt("Cannot stringify a function",o);if(t.has(l))return t.get(l);if(l===void 0)return Ir;if(Number.isNaN(l))return dn;if(l===1/0)return mn;if(l===-1/0)return hn;if(l===0&&1/l<0)return Or;const h=a++;t.set(l,h);for(const{key:T,fn:k}of u){const F=k(l);if(F)return i[h]=`["${T}",${d(F)}]`,h}let m="";if(gr(l))m=qt(l);else{const T=Sn(l);switch(T){case"Number":case"String":case"Boolean":m=`["Object",${qt(l)}]`;break;case"BigInt":m=`["BigInt",${l}]`;break;case"Date":m=`["Date","${!isNaN(l.getDate())?l.toISOString():""}"]`;break;case"RegExp":const{source:F,flags:I}=l;m=I?`["RegExp",${Oe(F)},"${I}"]`:`["RegExp",${Oe(F)}]`;break;case"Array":m="[";for(let g=0;g<l.length;g+=1)g>0&&(m+=","),g in l?(o.push(`[${g}]`),m+=d(l[g]),o.pop()):m+=pn;m+="]";break;case"Set":m='["Set"';for(const g of l)m+=`,${d(g)}`;m+="]";break;case"Map":m='["Map"';for(const[g,P]of l)o.push(`.get(${gr(g)?qt(g):"..."})`),m+=`,${d(g)},${d(P)}`,o.pop();m+="]";break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":{const P=hr(l.buffer);m='["'+T+'","'+P+'"]';break}case"ArrayBuffer":{m=`["ArrayBuffer","${hr(l)}"]`;break}default:if(!En(l))throw new Bt("Cannot stringify arbitrary non-POJOs",o);if(Tn(l).length>0)throw new Bt("Cannot stringify POJOs with symbolic keys",o);if(Object.getPrototypeOf(l)===null){m='["null"';for(const g in l)o.push(br(g)),m+=`,${Oe(g)},${d(l[g])}`,o.pop();m+="]"}else{m="{";let g=!1;for(const P in l)g&&(m+=","),g=!0,o.push(br(P)),m+=`${Oe(P)}:${d(l[P])}`,o.pop();m+="}"}}}return i[h]=m,h}const p=d(e);return p<0?`${p}`:`[${i.join(",")}]`}function qt(e){const n=typeof e;return n==="string"?Oe(e):e instanceof String?Oe(e.toString()):e===void 0?Ir.toString():e===0&&1/e<0?Or.toString():n==="bigint"?`["BigInt","${e}"]`:String(e)}const Rr=wn,Mn="data-label-root";var Qe,$e,gt;class kn{constructor(n){S(this,Qe);S(this,$e);S(this,gt,D(()=>({[Mn]:"",onmousedown:this.onmousedown})));W(this,Qe,n.id),W(this,$e,n.ref),this.onmousedown=this.onmousedown.bind(this),Ot({id:b(this,Qe),ref:b(this,$e)})}onmousedown(n){n.detail>1&&n.preventDefault()}get props(){return A(b(this,gt))}}Qe=new WeakMap,$e=new WeakMap,gt=new WeakMap;function In(e){return new kn(e)}var On=qe("<label><!></label>");function Rn(e,n){de(n,!0);let i=se(n,"id",19,ln),t=se(n,"ref",15,null),u=Ee(n,["$$slots","$$events","$$legacy","children","child","id","ref","for"]);const o=In({id:ce.with(()=>i()),ref:ce.with(()=>t(),l=>t(l))}),a=D(()=>Xt(u,o.props,{for:n.for}));var d=B(),p=U(d);Ze(p,()=>n.child,l=>{var h=B(),m=U(h);ie(m,()=>n.child,()=>({props:A(a)})),M(l,h)},l=>{var h=On();let m;var T=Ve(h);ie(T,()=>n.children??_e),Ue(h),Le(()=>m=Be(h,m,{...A(a),for:n.for})),M(l,h)}),M(e,d),me()}function Cn(e){return Array.isArray(e)?e:typeof e=="object"&&"_errors"in e&&e._errors!==void 0?e._errors:[]}function Ht(e,n){const i=e.split(/[[\].]/).filter(Boolean);let t=n;for(const u of i){if(typeof t!="object"||t===null)return;t=t[u]}return t}function Dn({fieldErrorsId:e=void 0,descriptionId:n=void 0,errors:i}){let t="";return n&&(t+=`${n} `),i.length&&e&&(t+=e),t?t.trim():void 0}function xn(e){if("required"in e)return e.required?"true":void 0}function jn(e){return e&&e.length?"true":void 0}function Rt(e){return e&&e.length?"":void 0}var bt,oe,et,Ce,De,tt,vt,wt,_t,Et,rt,nt,St;class Nn{constructor(n){S(this,bt);S(this,oe);S(this,et);S(this,Ce);S(this,De);S(this,tt);S(this,vt,D(()=>b(this,oe).current));S(this,wt,D(()=>Cn(Ht(b(this,oe).current,b(this,et).current))));S(this,_t,D(()=>Ht(b(this,oe).current,b(this,Ce).current)??{}));S(this,Et,D(()=>b(this,De).current?Ht(b(this,oe).current,b(this,De).current)===!0:!1));S(this,rt,cr(null));S(this,nt,cr(null));S(this,St,D(()=>({value:b(this,tt).current[b(this,oe).current],errors:this.errors,tainted:this.tainted,constraints:b(this,Ce).current[b(this,oe).current]??{}})));W(this,bt,n.form),W(this,oe,n.name),W(this,et,ct(n.form.current.errors)),W(this,Ce,ct(n.form.current.constraints)),W(this,De,ct(n.form.current.tainted)),W(this,tt,ct(n.form.current.form))}get name(){return A(b(this,vt))}get errors(){return A(b(this,wt))}get constraints(){return A(b(this,_t))}get tainted(){return A(b(this,Et))}get errorNode(){return A(b(this,rt))}set errorNode(n){dr(b(this,rt),mr(n))}get descriptionNode(){return A(b(this,nt))}set descriptionNode(n){dr(b(this,nt),mr(n))}get snippetProps(){return A(b(this,St))}}bt=new WeakMap,oe=new WeakMap,et=new WeakMap,Ce=new WeakMap,De=new WeakMap,tt=new WeakMap,vt=new WeakMap,wt=new WeakMap,_t=new WeakMap,Et=new WeakMap,rt=new WeakMap,nt=new WeakMap,St=new WeakMap;var it,xe,st,At,Tt,Ft;class Ln{constructor(n,i){S(this,it);S(this,xe);Pe(this,"field");S(this,st,D(()=>Rt(this.field.errors)));S(this,At,D(()=>({errors:this.field.errors,errorProps:this.errorProps})));S(this,Tt,D(()=>({id:b(this,xe).current,"data-fs-error":A(b(this,st)),"data-fs-field-errors":"","aria-live":"assertive"})));S(this,Ft,D(()=>({"data-fs-field-error":"","data-fs-error":A(b(this,st))})));W(this,it,n.ref),W(this,xe,n.id),this.field=i,Ot({id:b(this,xe),ref:b(this,it),onRefChange:t=>{this.field.errorNode=t}})}get snippetProps(){return A(b(this,At))}get fieldErrorsProps(){return A(b(this,Tt))}get errorProps(){return A(b(this,Ft))}}it=new WeakMap,xe=new WeakMap,st=new WeakMap,At=new WeakMap,Tt=new WeakMap,Ft=new WeakMap;var at,je,Pt;class Vn{constructor(n,i){S(this,at);S(this,je);Pe(this,"field");S(this,Pt,D(()=>({id:b(this,je).current,"data-fs-error":Rt(this.field.errors),"data-fs-description":""})));W(this,at,n.ref),W(this,je,n.id),this.field=i,Ot({id:b(this,je),ref:b(this,at),onRefChange:t=>{this.field.descriptionNode=t}})}get props(){return A(b(this,Pt))}}at=new WeakMap,je=new WeakMap,Pt=new WeakMap;var Mt;class Un{constructor(n,i){Pe(this,"id");Pe(this,"field");S(this,Mt,D(()=>{var n,i;return{id:this.id.current,name:this.field.name,"data-fs-error":Rt(this.field.errors),"aria-describedby":Dn({fieldErrorsId:(n=this.field.errorNode)==null?void 0:n.id,descriptionId:(i=this.field.descriptionNode)==null?void 0:i.id,errors:this.field.errors}),"aria-invalid":jn(this.field.errors),"aria-required":xn(this.field.constraints),"data-fs-control":""}}));this.id=n.id,this.field=i}get props(){return A(b(this,Mt))}}Mt=new WeakMap;var ot,Ne,kt;class Bn{constructor(n,i){S(this,ot);S(this,Ne);Pe(this,"control");S(this,kt,D(()=>({id:b(this,Ne).current,"data-fs-label":"","data-fs-error":Rt(this.control.field.errors),for:this.control.id.current})));W(this,ot,n.ref),W(this,Ne,n.id),this.control=i,Ot({id:b(this,Ne),ref:b(this,ot)})}get props(){return A(b(this,kt))}}ot=new WeakMap,Ne=new WeakMap,kt=new WeakMap;const Cr=Symbol.for("formsnap.form-field"),Dr=Symbol.for("formsnap.form-control");function qn(e){return Tr(Cr,new Nn(e))}function Zt(){return Fr(Cr)}function Hn(e){return new Ln(e,Zt())}function ji(e){return new Vn(e,Zt())}function Yn(e){return Tr(Dr,new Un(e,Zt()))}function zn(){return Fr(Dr)}function Gn(e){return new Bn(e,zn())}let vr=0;function Kt(e="formsnap"){return vr++,`${e}-${vr}`}function Wn(e,n){de(n,!0);const i=qn({form:ce.with(()=>n.form),name:ce.with(()=>n.name)});var t=B(),u=U(t);ie(u,()=>n.children??_e,()=>i.snippetProps),M(e,t),me()}function Xn(e,n){de(n,!0);let i=se(n,"id",19,Kt);const t=Yn({id:ce.with(()=>i())});var u=B(),o=U(u);ie(o,()=>n.children??_e,()=>({props:t.props})),M(e,u),me()}var Jn=qe("<label><!></label>");function Zn(e,n){de(n,!0);let i=se(n,"id",19,Kt),t=se(n,"ref",15,null),u=Ee(n,["$$slots","$$events","$$legacy","id","ref","children","child"]);const o=Gn({id:ce.with(()=>i()),ref:ce.with(()=>t(),l=>t(l))}),a=D(()=>Xt(u,o.props));var d=B(),p=U(d);Ze(p,()=>n.child,l=>{var h=B(),m=U(h);ie(m,()=>n.child,()=>({props:A(a)})),M(l,h)},l=>{var h=Jn();let m;var T=Ve(h);ie(T,()=>n.children??_e),Ue(h),Le(()=>m=Be(h,m,{...A(a)})),M(l,h)}),M(e,d),me()}var Kn=qe("<div> </div>"),Qn=qe("<div><!></div>");function $n(e,n){de(n,!0);let i=se(n,"id",19,Kt),t=se(n,"ref",15,null),u=Ee(n,["$$slots","$$events","$$legacy","id","ref","children","child"]);const o=Hn({id:ce.with(()=>i()),ref:ce.with(()=>t(),l=>t(l))}),a=D(()=>Xt(u,o.fieldErrorsProps));var d=B(),p=U(d);Ze(p,()=>n.child,l=>{var h=B(),m=U(h);ie(m,()=>n.child,()=>({props:A(a),...o.snippetProps})),M(l,h)},l=>{var h=Qn();let m;var T=Ve(h);Ze(T,()=>n.children,k=>{var F=B(),I=U(F);ie(I,()=>n.children,()=>o.snippetProps),M(k,F)},k=>{var F=B(),I=U(F);Mr(I,17,()=>o.field.errors,kr,(g,P)=>{var ee=Kn();let Se;var he=Ve(ee,!0);Ue(ee),Le(()=>{Se=Be(ee,Se,{...o.errorProps}),Pr(he,A(P))}),M(g,ee)}),M(k,F)}),Ue(h),Le(()=>m=Be(h,m,{...A(a)})),M(l,h)}),M(e,d),me()}function ei(e,n){de(n,!0);let i=se(n,"ref",15,null),t=Ee(n,["$$slots","$$events","$$legacy","ref","class"]);var u=B(),o=U(u),a=D(()=>Ke("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",n.class));It(o,()=>Rn,(d,p)=>{p(d,pt({get ref(){return i()},set ref(l){i(l)},get class(){return A(a)}},()=>t))}),M(e,u),me()}function Ni(e,n){de(n,!0);let i=se(n,"ref",15,null),t=Ee(n,["$$slots","$$events","$$legacy","ref","children","class"]);var u=B(),o=U(u);It(o,()=>Zn,(a,d)=>{d(a,pt(()=>t,{get ref(){return i()},set ref(l){i(l)},child:(l,h)=>{let m=()=>h==null?void 0:h().props;var T=D(()=>Ke("data-[fs-error]:text-destructive",n.class));ei(l,pt(m,{get class(){return A(T)},children:(k,F)=>{var I=B(),g=U(I);ie(g,()=>n.children??_e),M(k,I)},$$slots:{default:!0}}))},$$slots:{child:!0}}))}),M(e,u),me()}var ti=qe("<div> </div>");function Li(e,n){de(n,!0);let i=se(n,"ref",15,null),t=Ee(n,["$$slots","$$events","$$legacy","ref","class","errorClasses","children"]);var u=B(),o=U(u),a=D(()=>Ke("text-destructive text-sm font-medium",n.class));It(o,()=>$n,(d,p)=>{p(d,pt({get ref(){return i()},set ref(h){i(h)},get class(){return A(a)}},()=>t,{children:(h,m)=>{let T=()=>m==null?void 0:m().errors,k=()=>m==null?void 0:m().errorProps;var F=B(),I=U(F);Ze(I,()=>n.children,g=>{var P=B(),ee=U(P);ie(ee,()=>n.children,()=>({errors:T(),errorProps:k()})),M(g,P)},g=>{var P=B(),ee=U(P);Mr(ee,17,T,kr,(Se,he)=>{var Ae=ti();let He;var Ye=Ve(Ae,!0);Ue(Ae),Le(()=>{He=Be(Ae,He,{...k(),class:Ke(n.errorClasses)}),Pr(Ye,A(he))}),M(Se,Ae)}),M(g,P)}),M(h,F)},$$slots:{default:!0}}))}),M(e,u),me()}var ri=qe("<div><!></div>");function Vi(e,n){de(n,!0);let i=se(n,"ref",15,null),t=Ee(n,["$$slots","$$events","$$legacy","ref","class","form","name","children"]);var u=B(),o=U(u);It(o,()=>Wn,(a,d)=>{d(a,{get form(){return n.form},get name(){return n.name},children:(l,h)=>{let m=()=>h==null?void 0:h().constraints,T=()=>h==null?void 0:h().errors,k=()=>h==null?void 0:h().tainted,F=()=>h==null?void 0:h().value;var I=ri();let g;var P=Ve(I);ie(P,()=>n.children??_e,()=>({constraints:m(),errors:T(),tainted:k(),value:F()})),Ue(I),fn(I,ee=>i(ee),()=>i()),Le(()=>g=Be(I,g,{class:Ke("space-y-2",n.class),...t})),M(l,I)},$$slots:{default:!0}})}),M(e,u),me()}const Ui=Xn;function Yt(e,n,i){return e[n]=i,"skip"}function ni(e,n){return n.value!==void 0&&typeof n.value!="object"&&n.path.length<e.length}function ye(e,n,i={}){i.modifier||(i.modifier=u=>ni(n,u)?void 0:u.value);const t=ue(e,n,i.modifier);if(t)return i.value===void 0||i.value(t.value)?t:void 0}function ue(e,n,i){if(!n.length)return;const t=[n[0]];let u=e;for(;u&&t.length<n.length;){const a=t[t.length-1],d=i?i({parent:u,key:String(a),value:u[a],path:t.map(p=>String(p)),isLeaf:!1,set:p=>Yt(u,a,p)}):u[a];if(d===void 0)return;u=d,t.push(n[t.length])}if(!u)return;const o=n[n.length-1];return{parent:u,key:String(o),value:u[o],path:n.map(a=>String(a)),isLeaf:!0,set:a=>Yt(u,o,a)}}function le(e,n,i=[]){for(const t in e){const u=e[t],o=u===null||typeof u!="object",a={parent:e,key:t,value:u,path:i.concat([t]),isLeaf:o,set:p=>Yt(e,t,p)},d=n(a);if(d==="abort")return d;if(d==="skip")continue;if(!o){const p=le(u,n,a.path);if(p==="abort")return p}}}function ii(e,n){return e===n||e.size===n.size&&[...e].every(i=>n.has(i))}function wr(e,n){const i=new Map;function t(a,d){return a instanceof Date&&d instanceof Date&&a.getTime()!==d.getTime()||a instanceof Set&&d instanceof Set&&!ii(a,d)||a instanceof File&&d instanceof File&&a!==d}function u(a){return a instanceof Date||a instanceof Set||a instanceof File}function o(a,d){const p=d?ue(d,a.path):void 0;function l(){return i.set(a.path.join(" "),a.path),"skip"}if(u(a.value)&&(!u(p==null?void 0:p.value)||t(a.value,p.value)))return l();a.isLeaf&&(!p||a.value!==p.value)&&l()}return le(e,a=>o(a,n)),le(n,a=>o(a,e)),Array.from(i.values())}function ae(e,n,i){const t=typeof i=="function";for(const u of n){const o=ue(e,u,({parent:a,key:d,value:p})=>((p===void 0||typeof p!="object")&&(a[d]={}),a[d]));o&&(o.parent[o.key]=t?i(u,o):i)}}function Re(e){return e.toString().split(/[[\].]+/).filter(n=>n)}function We(e){return e.reduce((n,i)=>{const t=String(i);return typeof i=="number"||/^\d+$/.test(t)?n+=`[${t}]`:n?n+=`.${t}`:n+=t,n},"")}var si=Xe;function Xe(e){let n=e;var i={}.toString.call(e).slice(8,-1);if(i=="Set")return new Set([...e].map(u=>Xe(u)));if(i=="Map")return new Map([...e].map(u=>[Xe(u[0]),Xe(u[1])]));if(i=="Date")return new Date(e.getTime());if(i=="RegExp")return RegExp(e.source,ai(e));if(i=="Array"||i=="Object"){n=Array.isArray(e)?[]:{};for(var t in e)n[t]=Xe(e[t])}return n}function ai(e){if(typeof e.source.flags=="string")return e.source.flags;var n=[];return e.global&&n.push("g"),e.ignoreCase&&n.push("i"),e.multiline&&n.push("m"),e.sticky&&n.push("y"),e.unicode&&n.push("u"),n.join("")}function Q(e){return e&&typeof e=="object"?si(e):e}class V extends Error{constructor(n){super(n),Object.setPrototypeOf(this,V.prototype)}}function oi(e,n){var u;const i={};function t(o){if("_errors"in i||(i._errors=[]),!Array.isArray(i._errors))if(typeof i._errors=="string")i._errors=[i._errors];else throw new V("Form-level error was not an array.");i._errors.push(o.message)}for(const o of e){if(!o.path||o.path.length==1&&!o.path[0]){t(o);continue}const d=!/^\d$/.test(String(o.path[o.path.length-1]))&&((u=ye(n,o.path.filter(m=>/\D/.test(String(m)))))==null?void 0:u.value),p=ue(i,o.path,({value:m,parent:T,key:k})=>(m===void 0&&(T[k]={}),T[k]));if(!p){t(o);continue}const{parent:l,key:h}=p;d?(h in l||(l[h]={}),"_errors"in l[h]?l[h]._errors.push(o.message):l[h]._errors=[o.message]):h in l?l[h].push(o.message):l[h]=[o.message]}return i}function _r(e,n,i){return i?e:(le(n,t=>{Array.isArray(t.value)&&t.set(void 0)}),le(e,t=>{!Array.isArray(t.value)&&t.value!==void 0||ae(n,[t.path],t.value)}),n)}function ui(e){return xr(e,[])}function xr(e,n){return Object.entries(e).filter(([,t])=>t!==void 0).flatMap(([t,u])=>{if(Array.isArray(u)&&u.length>0){const o=n.concat([t]);return{path:We(o),messages:u}}else return xr(e[t],n.concat([t]))})}function Er(e){!e.flashMessage||!Rr||zt(e)&&(document.cookie=`flash=; Max-Age=0; Path=${e.flashMessage.cookiePath??"/"};`)}function zt(e){return!e.flashMessage||!Rr?!1:e.syncFlashMessage}const jr="noCustomValidity";async function Sr(e,n){"setCustomValidity"in e&&e.setCustomValidity(""),!(jr in e.dataset)&&Nr(e,n)}function fi(e,n){for(const i of e.querySelectorAll("input,select,textarea,button")){if("dataset"in i&&jr in i.dataset||!i.name)continue;const t=ue(n,Re(i.name)),u=t&&typeof t.value=="object"&&"_errors"in t.value?t.value._errors:t==null?void 0:t.value;if(Nr(i,u),u)return}}function Nr(e,n){const i=n&&n.length?n.join(`
`):"";e.setCustomValidity(i),i&&e.reportValidity()}const li=(e,n=0)=>{const i=e.getBoundingClientRect();return i.top>=n&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)},ci=(e,n=1.125,i="smooth")=>{const o=e.getBoundingClientRect().top+window.pageYOffset-window.innerHeight/(2*n);window.scrollTo({left:0,top:o,behavior:i})},di=["checkbox","radio","range","file"];function Ar(e){const n=!!e&&(e instanceof HTMLSelectElement||e instanceof HTMLInputElement&&di.includes(e.type)),i=!!e&&e instanceof HTMLSelectElement&&e.multiple,t=!!e&&e instanceof HTMLInputElement&&e.type=="file";return{immediate:n,multiple:i,file:t}}var z;(function(e){e[e.Idle=0]="Idle",e[e.Submitting=1]="Submitting",e[e.Delayed=2]="Delayed",e[e.Timeout=3]="Timeout"})(z||(z={}));const mi=new Set;function hi(e,n,i){let t=z.Idle,u,o;const a=mi;function d(){p(),h(t!=z.Delayed?z.Submitting:z.Delayed),u=window.setTimeout(()=>{u&&t==z.Submitting&&h(z.Delayed)},i.delayMs),o=window.setTimeout(()=>{o&&t==z.Delayed&&h(z.Timeout)},i.timeoutMs),a.add(p)}function p(){clearTimeout(u),clearTimeout(o),u=o=0,a.delete(p),h(z.Idle)}function l(){a.forEach(g=>g()),a.clear()}function h(g){t=g,n.submitting.set(t>=z.Submitting),n.delayed.set(t>=z.Delayed),n.timeout.set(t>=z.Timeout)}const m=e;function T(g){const P=g.target;i.selectErrorText&&P.select()}function k(){i.selectErrorText&&m.querySelectorAll("input").forEach(g=>{g.addEventListener("invalid",T)})}function F(){i.selectErrorText&&m.querySelectorAll("input").forEach(g=>g.removeEventListener("invalid",T))}const I=e;{k();const g=P=>{P.clearAll?l():p(),P.cancelled||setTimeout(()=>Gt(I,i),1)};return mt(()=>{F(),g({cancelled:!0})}),{submitting(){d()},completed:g,scrollToFirstError(){setTimeout(()=>Gt(I,i),1)},isSubmitting:()=>t===z.Submitting||t===z.Delayed}}}const Gt=async(e,n)=>{if(n.scrollToError=="off")return;const i=n.errorSelector;if(!i)return;await ht();let t;if(t=e.querySelector(i),!t)return;t=t.querySelector(i)??t;const u=n.stickyNavbar?document.querySelector(n.stickyNavbar):null;typeof n.scrollToError!="string"?t.scrollIntoView(n.scrollToError):li(t,(u==null?void 0:u.offsetHeight)??0)||ci(t,void 0,n.scrollToError);function o(d){return typeof n.autoFocusOnError=="boolean"?n.autoFocusOnError:!/iPhone|iPad|iPod|Android/i.test(d)}if(!o(navigator.userAgent))return;let a;if(a=t,["INPUT","SELECT","BUTTON","TEXTAREA"].includes(a.tagName)||(a=a.querySelector('input:not([type="hidden"]):not(.flatpickr-input), select, textarea')),a)try{a.focus({preventScroll:!0}),n.selectErrorText&&a.tagName=="INPUT"&&a.select()}catch{}};function Bi(e,n,i){const t=Je(e,n,i),u=re(new DataTransfer().files);let o=!1,a;return t.subscribe(p=>{o||(a=p,o=!0);const l=new DataTransfer;p instanceof File&&l.items.add(p),u.set(l.files)}),{subscribe(p){return u.subscribe(p)},set(p){if(p)if(p instanceof File){const l=new DataTransfer;l.items.add(p),u.set(l.files),t.set(p)}else p instanceof FileList&&(u.set(p),p.length>0?t.set(p.item(0)):t.set(a));else{const l=new DataTransfer;u.set(l.files),t.set(p)}},update(){throw new V("You cannot update a fileProxy, only set it.")}}}function yt(e,n,i){const t=ue(e,n,({parent:u,key:o,value:a})=>(a===void 0&&(u[o]=/\D/.test(o)?{}:[]),u[o]));if(t){const u=i(t.value);t.parent[t.key]=u}return e}function pi(e,n,i){const t=e.form,u=Re(n),o=Jt(t,a=>{const d=ue(a,u);return d==null?void 0:d.value});return{subscribe(...a){const d=o.subscribe(...a);return()=>d()},update(a,d){t.update(p=>yt(p,u,a),d??i)},set(a,d){t.update(p=>yt(p,u,()=>a),d??i)}}}function yi(e,n){const i="form"in e;if(!i&&(n==null?void 0:n.taint)!==void 0)throw new V("If options.taint is set, the whole superForm object must be used as a proxy.");return i}function Je(e,n,i){const t=Re(n);if(yi(e,i))return pi(e,n,i);const u=Jt(e,o=>{const a=ue(o,t);return a==null?void 0:a.value});return{subscribe(...o){const a=u.subscribe(...o);return()=>a()},update(o){e.update(a=>yt(a,t,o))},set(o){e.update(a=>yt(a,t,()=>o))}}}function Wt(e){let n={};const i=Array.isArray(e);for(const[t,u]of Object.entries(e))!u||typeof u!="object"||(i?n={...n,...Wt(u)}:n[t]=Wt(u));return n}const dt=new WeakMap,Me=new WeakMap,Lr=e=>{throw e.result.error},gi={applyAction:!0,invalidateAll:!0,resetForm:!0,autoFocusOnError:"detect",scrollToError:"smooth",errorSelector:'[aria-invalid="true"],[data-invalid]',selectErrorText:!1,stickyNavbar:void 0,taintedMessage:!1,onSubmit:void 0,onResult:void 0,onUpdate:void 0,onUpdated:void 0,onError:Lr,dataType:"form",validators:void 0,customValidity:!1,clearOnSubmit:"message",delayMs:500,timeoutMs:8e3,multipleSubmits:"prevent",SPA:void 0,validationMethod:"auto"};function bi(e){return`Duplicate form id's found: "${e}". Multiple forms will receive the same data. Use the id option to differentiate between them, or if this is intended, set the warnings.duplicateId option to false in superForm to disable this warning. More information: https://superforms.rocks/concepts/multiple-forms`}let Vr=!1;try{SUPERFORMS_LEGACY&&(Vr=!0)}catch{}let Ie=!1;try{globalThis.STORIES&&(Ie=!0)}catch{}function qi(e,n){var ur;let i,t=n??{},u;{if((t.legacy??Vr)&&(t.resetForm===void 0&&(t.resetForm=!1),t.taintedMessage===void 0&&(t.taintedMessage=!0)),Ie&&t.applyAction===void 0&&(t.applyAction=!1),typeof t.SPA=="string"&&(t.invalidateAll===void 0&&(t.invalidateAll=!1),t.applyAction===void 0&&(t.applyAction=!1)),u=t.validators,t={...gi,...t},(t.SPA===!0||typeof t.SPA=="object")&&t.validators===void 0&&console.warn("No validators set for superForm in SPA mode. Add a validation adapter to the validators option, or set it to false to disable this warning."),!e)throw new V("No form data sent to superForm. Make sure the output from superValidate is used (usually data.form) and that it's not null or undefined. Alternatively, an object with default values for the form can also be used, but then constraints won't be available.");l(e)===!1&&(e={id:t.id??Math.random().toString(36).slice(2,10),valid:!1,posted:!1,errors:{},data:e,shape:Wt(e)}),e=e;const r=e.id=t.id??e.id,s=ke(Ge)??(Ie?{}:void 0);if(((ur=t.warnings)==null?void 0:ur.duplicateId)!==!1)if(!dt.has(s))dt.set(s,new Set([r]));else{const f=dt.get(s);f!=null&&f.has(r)?console.warn(bi(r)):f==null||f.add(r)}if(Me.has(e)||Me.set(e,e),i=Me.get(e),e=Q(i),mt(()=>{var f;Zr(),Hr(),$r();for(const c of Object.values(J))c.length=0;(f=dt.get(s))==null||f.delete(r)}),t.dataType!=="json"){const f=(c,y)=>{if(!(!y||typeof y!="object")){if(Array.isArray(y))y.length>0&&f(c,y[0]);else if(!(y instanceof Date)&&!(y instanceof File)&&!(y instanceof FileList))throw new V(`Object found in form field "${c}". Set the dataType option to "json" and add use:enhance to use nested data structures. More information: https://superforms.rocks/concepts/nested-data`)}};for(const[c,y]of Object.entries(e.data))f(c,y)}}const o={formId:e.id,form:Q(e.data),constraints:e.constraints??{},posted:e.posted,errors:Q(e.errors),message:Q(e.message),tainted:void 0,valid:e.valid,submitting:!1,shape:e.shape},a=o,d=re(t.id??e.id);function p(r){return Object.values(r).filter(f=>l(f)!==!1)}function l(r){return!r||typeof r!="object"||!("valid"in r&&"errors"in r&&typeof r.valid=="boolean")?!1:"id"in r&&typeof r.id=="string"?r.id:!1}const h=re(e.data),m={subscribe:h.subscribe,set:(r,s={})=>{const f=Q(r);return nr(f,s.taint??!0),h.set(f)},update:(r,s={})=>h.update(f=>{const c=r(f);return nr(c,s.taint??!0),c})};function T(){return t.SPA===!0||typeof t.SPA=="object"}function k(r){var s;return r>400?r:(typeof t.SPA=="boolean"||typeof t.SPA=="string"||(s=t.SPA)==null?void 0:s.failStatus)||r}async function F(r={}){const s=r.formData??a.form;let f={},c;const y=r.adapter??t.validators;if(typeof y=="object"){if(y!=u&&!("jsonSchema"in y))throw new V('Client validation adapter found in options.validators. A full adapter must be used when changing validators dynamically, for example "zod" instead of "zodClient".');if(c=await y.validate(s),!c.success)f=oi(c.issues,y.shape??a.shape??{});else if(r.recheckValidData!==!1)return F({...r,recheckValidData:!1})}else c={success:!0,data:{}};const w={...a.form,...s,...c.success?c.data:{}};return{valid:c.success,posted:!1,errors:f,data:w,constraints:a.constraints,message:void 0,id:a.formId,shape:a.shape}}function I(r){if(!t.onChange||!r.paths.length||r.type=="blur")return;let s;const f=r.paths.map(We);r.type&&r.paths.length==1&&r.formElement&&r.target instanceof Element?s={path:f[0],paths:f,formElement:r.formElement,target:r.target,set(c,y,w){Je({form:m},c,w).set(y)},get(c){return ke(Je(m,c))}}:s={paths:f,target:void 0,set(c,y,w){Je({form:m},c,w).set(y)},get(c){return ke(Je(m,c))}},t.onChange(s)}async function g(r,s=!1,f){r&&(t.validators=="clear"&&te.update(w=>(ae(w,r.paths,void 0),w)),setTimeout(()=>I(r)));let c=!1;if(s||(t.validationMethod=="onsubmit"||t.validationMethod=="submit-only"||t.validationMethod=="onblur"&&(r==null?void 0:r.type)=="input"||t.validationMethod=="oninput"&&(r==null?void 0:r.type)=="blur")&&(c=!0),c||!r||!t.validators||t.validators=="clear"){if(r!=null&&r.paths){const w=(r==null?void 0:r.formElement)??ze();w&&P(w)}return}const y=await F({adapter:f});return y.valid&&(r.immediate||r.type!="input")&&m.set(y.data,{taint:"ignore"}),await ht(),ee(y.errors,r,s),y}function P(r){const s=new Map;if(t.customValidity&&r)for(const f of r.querySelectorAll("[name]")){if(typeof f.name!="string"||!f.name.length)continue;const c="validationMessage"in f?String(f.validationMessage):"";s.set(f.name,{el:f,message:c}),Sr(f,void 0)}return s}async function ee(r,s,f){const{type:c,immediate:y,multiple:w,paths:Z}=s,pe=a.errors,ge={};let Y=new Map;const q=s.formElement??ze();q&&(Y=P(q)),le(r,O=>{if(!Array.isArray(O.value))return;const j=[...O.path];j[j.length-1]=="_errors"&&j.pop();const Fe=j.join(".");function K(){if(ae(ge,[O.path],O.value),t.customValidity&&be&&Y.has(Fe)){const{el:G,message:ve}=Y.get(Fe);ve!=O.value&&(setTimeout(()=>Sr(G,O.value)),Y.clear())}}if(f)return K();const lt=O.path[O.path.length-1]=="_errors",be=O.value&&Z.some(G=>lt?j&&G&&j.length>0&&j[0]==G[0]:Fe==G.join("."));if(be&&t.validationMethod=="oninput"||y&&!w&&be)return K();if(w){const G=ye(ke(te),O.path.slice(0,-1));if(G!=null&&G.value&&typeof(G==null?void 0:G.value)=="object"){for(const ve of Object.values(G.value))if(Array.isArray(ve))return K()}}const fe=ye(pe,O.path);if(fe&&fe.key in fe.parent)return K();if(lt){if(t.validationMethod=="oninput"||c=="blur"&&Wr(We(O.path.slice(0,-1))))return K()}else if(c=="blur"&&be)return K()}),te.set(ge)}function Se(r,s={}){return s.keepFiles&&le(a.form,f=>{if(!(f.parent instanceof FileList)&&(f.value instanceof File||f.value instanceof FileList)){const c=ye(r,f.path);(!c||!(c.key in c.parent))&&ae(r,[f.path],f.value)}}),m.set(r,s)}function he(r,s){return r&&s&&t.resetForm&&(t.resetForm===!0||t.resetForm())}function Ae(r=!0){let s=a.form,f=a.tainted;if(r){const c=tn(a.form);s=c.data;const y=c.paths;y.length&&(f=Q(f)??{},ae(f,y,!1))}return{valid:a.valid,posted:a.posted,errors:a.errors,data:s,constraints:a.constraints,message:a.message,id:a.formId,tainted:f,shape:a.shape}}async function He(r,s){r.valid&&s&&he(r.valid,s)?Ye({message:r.message,posted:!0}):ft({form:r,untaint:s,keepFiles:!0,skipFormData:t.invalidateAll=="force"}),J.onUpdated.length&&await ht();for(const f of J.onUpdated)f({form:r})}function Ye(r={}){r.newState&&(i.data={...i.data,...r.newState});const s=Q(i);s.data={...s.data,...r.data},r.id!==void 0&&(s.id=r.id),ft({form:s,untaint:!0,message:r.message,keepFiles:!1,posted:r.posted,resetted:!0})}async function Ur(r){if(r.type=="error")throw new V(`ActionResult of type "${r.type}" cannot be passed to update function.`);if(r.type=="redirect"){he(!0,!0)&&Ye({posted:!0});return}if(typeof r.data!="object")throw new V("Non-object validation data returned from ActionResult.");const s=p(r.data);if(!s.length)throw new V("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const f of s)f.id===a.formId&&await He(f,r.status>=200&&r.status<300)}const Te=re(o.message),Ct=re(o.constraints),Dt=re(o.posted),Qt=re(o.shape),xt=re(e.errors),te={subscribe:xt.subscribe,set(r,s){return xt.set(_r(r,a.errors,s==null?void 0:s.force))},update(r,s){return xt.update(f=>_r(r(f),a.errors,s==null?void 0:s.force))},clear:()=>te.set({})};let x=null;function Br(r){var s;x&&r&&Object.keys(r).length==1&&((s=r.paths)!=null&&s.length)&&x.target&&x.target instanceof HTMLInputElement&&x.target.type.toLowerCase()=="file"?x.paths=r.paths:x=r,setTimeout(()=>{g(x)},0)}function qr(r,s,f,c,y){x===null&&(x={paths:[]}),x.type=r,x.immediate=s,x.multiple=f,x.formElement=c,x.target=y}function $t(){return(x==null?void 0:x.paths)??[]}function Hr(){x=null}const H={defaultMessage:"Leave page? Changes that you made may not be saved.",state:re(),message:t.taintedMessage,clean:Q(e.data),forceRedirection:!1};function er(){return t.taintedMessage&&!a.submitting&&!H.forceRedirection&&rr()}function tr(r){if(!er())return;r.preventDefault(),r.returnValue="";const{taintedMessage:s}=t,c=typeof s=="function"||s===!0?H.defaultMessage:s;return(r||window.event).returnValue=c||H.defaultMessage,c}async function Yr(r){if(!er())return;const{taintedMessage:s}=t,f=typeof s=="function";if(f&&r.cancel(),r.type==="leave")return;const c=f||s===!0?H.defaultMessage:s;let y;try{y=f?await s():window.confirm(c||H.defaultMessage)}catch{y=!1}if(y&&r.to)try{H.forceRedirection=!0,await gn(r.to.url,{...r.to.params});return}finally{H.forceRedirection=!1}else!y&&!f&&r.cancel()}function zr(){t.taintedMessage=H.message}function Gr(){return H.state}function Wr(r){if(!a.tainted)return!1;if(!r)return!!a.tainted;const s=ye(a.tainted,Re(r));return!!s&&s.key in s.parent}function rr(r){if(!arguments.length)return ut(a.tainted);if(typeof r=="boolean")return r;if(typeof r=="object")return ut(r);if(!a.tainted||r===void 0)return!1;const s=ye(a.tainted,Re(r));return ut(s==null?void 0:s.value)}function ut(r){if(!r)return!1;if(typeof r=="object"){for(const s of Object.values(r))if(ut(s))return!0}return r===!0}function nr(r,s){if(s=="ignore")return;const f=wr(r,a.form),c=wr(r,H.clean).map(y=>y.join());f.length&&(s=="untaint-all"||s=="untaint-form"?H.state.set(void 0):H.state.update(y=>(y||(y={}),ae(y,f,(w,Z)=>{if(!c.includes(w.join()))return;const pe=ue(r,w),ge=ue(H.clean,w);return pe&&ge&&pe.value===ge.value?void 0:s===!0?!0:s==="untaint"?void 0:Z.value}),y)),Br({paths:f}))}function Xr(r,s){H.state.set(r),s&&(H.clean=s)}const jt=re(!1),ir=re(!1),sr=re(!1),ar=[H.state.subscribe(r=>o.tainted=Q(r)),m.subscribe(r=>o.form=Q(r)),te.subscribe(r=>o.errors=Q(r)),d.subscribe(r=>o.formId=r),Ct.subscribe(r=>o.constraints=r),Dt.subscribe(r=>o.posted=r),Te.subscribe(r=>o.message=r),jt.subscribe(r=>o.submitting=r),Qt.subscribe(r=>o.shape=r)];function Jr(r){ar.push(r)}function Zr(){ar.forEach(r=>r())}let X;function ze(){return X}function Kr(r){X=document.createElement("form"),X.method="POST",X.action=r,or(X),document.body.appendChild(X)}function Qr(r){X&&(X.action=r)}function $r(){X!=null&&X.parentElement&&X.remove(),X=void 0}const en=Jt(te,r=>r?ui(r):[]);t.taintedMessage=void 0;function ft(r){const s=r.form,f=r.message??s.message;if((r.untaint||r.resetted)&&Xr(typeof r.untaint=="boolean"?void 0:r.untaint,s.data),r.skipFormData!==!0&&Se(s.data,{taint:"ignore",keepFiles:r.keepFiles}),Te.set(f),r.resetted?te.update(()=>({}),{force:!0}):te.set(s.errors),d.set(s.id),Dt.set(r.posted??s.posted),s.constraints&&Ct.set(s.constraints),s.shape&&Qt.set(s.shape),o.valid=s.valid,t.flashMessage&&zt(t)){const c=t.flashMessage.module.getFlash(Ge);f&&ke(c)===void 0&&c.set(f)}}const J={onSubmit:t.onSubmit?[t.onSubmit]:[],onResult:t.onResult?[t.onResult]:[],onUpdate:t.onUpdate?[t.onUpdate]:[],onUpdated:t.onUpdated?[t.onUpdated]:[],onError:t.onError?[t.onError]:[]};window.addEventListener("beforeunload",tr),mt(()=>{window.removeEventListener("beforeunload",tr)}),yn(Yr),Jr(Ge.subscribe(async r=>{Ie&&r===void 0&&(r={status:200});const s=r.status>=200&&r.status<300;if(t.applyAction&&r.form&&typeof r.form=="object"){const f=r.form;if(f.type==="error")return;for(const c of p(f)){const y=Me.has(c);c.id!==a.formId||y||(Me.set(c,c),await He(c,s))}}else if(r.data&&typeof r.data=="object")for(const f of p(r.data)){const c=Me.has(f);if(f.id!==a.formId||c)continue;t.invalidateAll==="force"&&(i.data=f.data);const y=he(f.valid,!0);ft({form:f,untaint:s,keepFiles:!y,resetted:y})}})),typeof t.SPA=="string"&&Kr(t.SPA);function or(r,s){if(t.SPA!==void 0&&r.method=="get"&&(r.method="post"),typeof t.SPA=="string"?t.SPA.length&&r.action==document.location.href&&(r.action=t.SPA):X=r,s){if(s.onError){if(t.onError==="apply")throw new V('options.onError is set to "apply", cannot add any onError events.');if(s.onError==="apply")throw new V('Cannot add "apply" as onError event in use:enhance.');J.onError.push(s.onError)}s.onResult&&J.onResult.push(s.onResult),s.onSubmit&&J.onSubmit.push(s.onSubmit),s.onUpdate&&J.onUpdate.push(s.onUpdate),s.onUpdated&&J.onUpdated.push(s.onUpdated)}zr();let f;async function c(Y){const q=Ar(Y.target);q.immediate&&!q.file&&await new Promise(O=>setTimeout(O,0)),f=$t(),qr("input",q.immediate,q.multiple,r,Y.target??void 0)}async function y(Y){if(a.submitting||!f||$t()!=f)return;const q=Ar(Y.target);q.immediate&&!q.file&&await new Promise(O=>setTimeout(O,0)),g({paths:f,immediate:q.multiple,multiple:q.multiple,type:"blur",formElement:r,target:Y.target??void 0}),f=void 0}r.addEventListener("focusout",y),r.addEventListener("input",c),mt(()=>{r.removeEventListener("focusout",y),r.removeEventListener("input",c)});const w=hi(r,{submitting:jt,delayed:ir,timeout:sr},t);let Z,pe;const ge=vn(r,async Y=>{let q,O=t.validators;const j={...Y,jsonData(_){if(t.dataType!=="json")throw new V("options.dataType must be set to 'json' to use jsonData.");q=_},validators(_){O=_},customRequest(_){pe=_}},Fe=j.cancel;let K=!1;function Nt(_){const v={..._,posted:!0},E=v.valid?200:k(400),N={form:v},R=v.valid?{type:"success",status:E,data:N}:{type:"failure",status:E,data:N};setTimeout(()=>ve({result:R}),0)}function lt(){switch(t.clearOnSubmit){case"errors-and-message":te.clear(),Te.set(void 0);break;case"errors":te.clear();break;case"message":Te.set(void 0);break}}async function be(_,v){var E;if(_.status=v,t.onError!=="apply"){const N={result:_,message:Te,form:e};for(const R of J.onError)R!=="apply"&&(R!=Lr||!((E=t.flashMessage)!=null&&E.onError))&&await R(N)}t.flashMessage&&t.flashMessage.onError&&await t.flashMessage.onError({result:_,flashMessage:t.flashMessage.module.getFlash(Ge)}),t.applyAction&&(t.onError=="apply"?await Ut(_):await Ut({type:"failure",status:k(_.status),data:_}))}function fe(_={resetTimers:!0}){return K=!0,_.resetTimers&&w.isSubmitting()&&w.completed({cancelled:K}),Fe()}if(j.cancel=fe,w.isSubmitting()&&t.multipleSubmits=="prevent")fe({resetTimers:!1});else{w.isSubmitting()&&t.multipleSubmits=="abort"&&Z&&Z.abort(),w.submitting(),Z=j.controller;for(const _ of J.onSubmit)try{await _(j)}catch(v){fe(),be({type:"error",error:v},500)}}if(K&&t.flashMessage&&Er(t),!K){const _=!T()&&(r.noValidate||(j.submitter instanceof HTMLButtonElement||j.submitter instanceof HTMLInputElement)&&j.submitter.formNoValidate);let v;const E=async()=>await F({adapter:O});if(lt(),_||(v=await E(),v.valid||(fe({resetTimers:!1}),Nt(v))),!K){t.flashMessage&&(t.clearOnSubmit=="errors-and-message"||t.clearOnSubmit=="message")&&zt(t)&&t.flashMessage.module.getFlash(Ge).set(void 0);const N="formData"in j?j.formData:j.data;if(f=void 0,T())v||(v=await E()),fe({resetTimers:!1}),Nt(v);else if(t.dataType==="json"){v||(v=await E());const R=Q(q??v.data);le(R,L=>{if(L.value instanceof File){const C="__superform_file_"+We(L.path);return N.append(C,L.value),L.set(void 0)}else if(Array.isArray(L.value)&&L.value.length&&L.value.every(C=>C instanceof File)){const C="__superform_files_"+We(L.path);for(const $ of L.value)N.append(C,$);return L.set(void 0)}}),Object.keys(R).forEach(L=>{typeof N.get(L)=="string"&&N.delete(L)});const we=G(Pn(R),t.jsonChunkSize??5e5);for(const L of we)N.append("__superform_json",L)}if(!N.has("__superform_id")){const R=a.formId;R!==void 0&&N.set("__superform_id",R)}typeof t.SPA=="string"&&Qr(t.SPA)}}function G(_,v){const E=Math.ceil(_.length/v),N=new Array(E);for(let R=0,we=0;R<E;++R,we+=v)N[R]=_.substring(we,we+v);return N}async function ve(_){let v=!1;Z=null;let E="type"in _.result&&"status"in _.result?_.result:{type:"error",status:k(parseInt(String(_.result.status))||500),error:_.result.error instanceof Error?_.result.error:_.result};const N=()=>v=!0,R={result:E,formEl:r,formElement:r,cancel:N},we=Ie||!T()?()=>{}:pr.subscribe(C=>{var $,ne;!C||(($=C.from)==null?void 0:$.route.id)===((ne=C.to)==null?void 0:ne.route.id)||N()});function L(C,$,ne){$.result={type:"error",error:C,status:k(ne)}}for(const C of J.onResult)try{await C(R)}catch($){L($,R,Math.max(E.status??500,400))}if(E=R.result,!v){if((E.type==="success"||E.type==="failure")&&E.data){const C=p(E.data);if(!C.length)throw new V("No form data returned from ActionResult. Make sure you return { form } in the form actions.");for(const $ of C){if($.id!==a.formId)continue;const ne={form:$,formEl:r,formElement:r,cancel:()=>v=!0,result:E};for(const Lt of J.onUpdate)try{await Lt(ne)}catch(rn){L(rn,ne,Math.max(E.status??500,400))}E=ne.result,v||(t.customValidity&&fi(r,ne.form.errors),he(ne.form.valid,E.type=="success")&&ne.formElement.querySelectorAll('input[type="file"]').forEach(Lt=>Lt.value=""))}}v||(E.type!=="error"?(E.type==="success"&&t.invalidateAll&&await bn(),t.applyAction?await Ut(E):await Ur(E)):await be(E,Math.max(E.status??500,400)))}if(v&&t.flashMessage&&Er(t),v||E.type!="redirect")w.completed({cancelled:v});else if(Ie)w.completed({cancelled:v,clearAll:!0});else{const C=pr.subscribe($=>{$||(setTimeout(()=>{try{C&&C()}catch{}}),w.isSubmitting()&&w.completed({cancelled:v,clearAll:!0}))})}we()}if(!K&&pe){Fe();const _=await pe(Y);let v;_ instanceof Response?v=yr(await _.text()):_ instanceof XMLHttpRequest?v=yr(_.responseText):v=_,v.type==="error"&&(v.status=_.status),ve({result:v})}return ve});return{destroy:()=>{for(const[Y,q]of Object.entries(J))J[Y]=q.filter(O=>O===t[Y]);ge.destroy()}}}function tn(r){const s=[];if(le(r,c=>{if(c.value instanceof File)return s.push(c.path),"skip";if(Array.isArray(c.value)&&c.value.length&&c.value.every(y=>y instanceof File))return s.push(c.path),"skip"}),!s.length)return{data:r,paths:s};const f=Q(r);return ae(f,s,c=>{var y;return(y=ye(i.data,c))==null?void 0:y.value}),{data:f,paths:s}}return{form:m,formId:d,errors:te,message:Te,constraints:Ct,tainted:Gr(),submitting:Vt(jt),delayed:Vt(ir),timeout:Vt(sr),options:t,capture:Ae,restore:r=>{ft({form:r,untaint:r.tainted??!0})},async validate(r,s={}){if(!t.validators)throw new V("options.validators must be set to use the validate method.");s.update===void 0&&(s.update=!0),s.taint===void 0&&(s.taint=!1),typeof s.errors=="string"&&(s.errors=[s.errors]);let f;const c=Re(r);"value"in s?s.update===!0||s.update==="value"?(m.update(Z=>(ae(Z,[c],s.value),Z),{taint:s.taint}),f=a.form):(f=Q(a.form),ae(f,[c],s.value)):f=a.form;const y=await F({formData:f}),w=ye(y.errors,c);return w&&w.value&&s.errors&&(w.value=s.errors),(s.update===!0||s.update=="errors")&&te.update(Z=>(ae(Z,[c],w==null?void 0:w.value),Z)),w==null?void 0:w.value},async validateForm(r={}){if(!t.validators&&!r.schema)throw new V("options.validators or the schema option must be set to use the validateForm method.");const s=r.update?await g({paths:[]},!0,r.schema):F({adapter:r.schema}),f=ze();return r.update&&f&&setTimeout(()=>{f&&Gt(f,{...t,scrollToError:r.focusOnError===!1?"off":t.scrollToError})},1),s||F({adapter:r.schema})},allErrors:en,posted:Dt,reset(r){return Ye({message:r!=null&&r.keepMessage?a.message:void 0,data:r==null?void 0:r.data,id:r==null?void 0:r.id,newState:r==null?void 0:r.newState})},submit(r){const s=ze()?ze():r&&r instanceof HTMLElement?r.closest("form"):void 0;if(!s)throw new V("use:enhance must be added to the form to use submit, or pass a HTMLElement inside the form (or the form itself) as an argument.");if(!s.requestSubmit)return s.submit();const f=r&&(r instanceof HTMLButtonElement&&r.type=="submit"||r instanceof HTMLInputElement&&["submit","image"].includes(r.type));s.requestSubmit(f?r:void 0)},isTainted:rr,enhance:or}}new TextEncoder;let vi=!1;try{SUPERFORMS_LEGACY&&(vi=!0)}catch{}export{Ui as C,Vi as F,ei as L,Li as a,Ni as b,ji as c,Bi as f,qi as s,Kt as u};
