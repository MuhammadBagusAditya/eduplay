var nt=Object.defineProperty;var $=e=>{throw TypeError(e)};var lt=(e,t,r)=>t in e?nt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var D=(e,t,r)=>lt(e,typeof t!="symbol"?t+"":t,r),tt=(e,t,r)=>t.has(e)||$("Cannot "+r);var a=(e,t,r)=>(tt(e,t,"read from private field"),r?r.call(e):t.get(e)),d=(e,t,r)=>t.has(e)?$("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),v=(e,t,r,s)=>(tt(e,t,"write to private field"),s?s.call(e,r):t.set(e,r),r);import"./disclose-version.Bg9kRutz.js";import{d as P,g as _,a2 as ot,h as ct,p as O,f as w,i as et,t as H,a as L,c as rt,r as at}from"./runtime.Bp4x7A-a.js";import{c as b,a as m,b as J}from"./template.DQ3Ggw9n.js";import{c as N}from"./svelte-component.CVO9o64T.js";import{c as f,i as Q,r as z,z as dt,g as U}from"./props.DpK8ESsy.js";import{a as W,h as ut,c as X}from"./utils.Dqu1-Wdg.js";import{s as F}from"./snippet.DzwRyOEQ.js";import{a as Y,u as Z,b as y,m as p}from"./use-id.B41njTOf.js";import{d as ft}from"./scroll-lock.Cdff5hXG.js";const ht="data-avatar-root",gt="data-avatar-image",vt="data-avatar-fallback";var k,V,E;class mt{constructor(t){d(this,k);d(this,V);D(this,"delayMs");D(this,"loadingStatus");d(this,E,P(()=>({id:a(this,k).current,[ht]:"","data-status":this.loadingStatus.current})));this.delayMs=t.delayMs,this.loadingStatus=t.loadingStatus,v(this,V,t.ref),v(this,k,t.id),this.loadImage=this.loadImage.bind(this),Y({id:a(this,k),ref:a(this,V)})}loadImage(t,r,s){let o;const l=new Image;return l.src=t,r!==void 0&&(l.crossOrigin=r),s&&(l.referrerPolicy=s),this.loadingStatus.current="loading",l.onload=()=>{o=window.setTimeout(()=>{this.loadingStatus.current="loaded"},this.delayMs.current)},l.onerror=()=>{this.loadingStatus.current="error"},()=>{window.clearTimeout(o)}}get props(){return _(a(this,E))}}k=new WeakMap,V=new WeakMap,E=new WeakMap;var M,B,T,x,I,R,G;class _t{constructor(t,r){d(this,M);d(this,B);d(this,T);d(this,x);d(this,I);d(this,R);d(this,G,P(()=>({id:a(this,M).current,style:{display:a(this,R).loadingStatus.current==="loaded"?"block":"none"},"data-status":a(this,R).loadingStatus.current,[gt]:"",src:a(this,I).current,crossorigin:a(this,T).current,referrerpolicy:a(this,x).current})));v(this,R,r),v(this,I,t.src),v(this,M,t.id),v(this,B,t.ref),v(this,T,t.crossOrigin),v(this,x,t.referrerPolicy),Y({id:a(this,M),ref:a(this,B)}),ot(()=>{if(!a(this,I).current){a(this,R).loadingStatus.current="error";return}a(this,T).current,ct(()=>a(this,R).loadImage(a(this,I).current??"",a(this,T).current,a(this,x).current))})}get props(){return _(a(this,G))}}M=new WeakMap,B=new WeakMap,T=new WeakMap,x=new WeakMap,I=new WeakMap,R=new WeakMap,G=new WeakMap;var j,q,C,K;class At{constructor(t,r){d(this,j);d(this,q);d(this,C);d(this,K,P(()=>({style:{display:a(this,C).loadingStatus.current==="loaded"?"none":void 0},"data-status":a(this,C).loadingStatus.current,[vt]:""})));v(this,C,r),v(this,j,t.id),v(this,q,t.ref),Y({id:a(this,j),ref:a(this,q)})}get props(){return _(a(this,K))}}j=new WeakMap,q=new WeakMap,C=new WeakMap,K=new WeakMap;const[yt,st]=ft("Avatar.Root");function St(e){return yt(new mt(e))}function wt(e){const t=st();return new _t(e,t)}function bt(e){const t=st();return new At(e,t)}var Pt=J("<div><!></div>");function Rt(e,t){O(t,!0);let r=f(t,"delayMs",3,0),s=f(t,"loadingStatus",15,"loading"),o=f(t,"id",19,Z),l=f(t,"ref",15,null),h=z(t,["$$slots","$$events","$$legacy","delayMs","loadingStatus","onLoadingStatusChange","child","children","id","ref"]);const g=St({delayMs:y.with(()=>r()),loadingStatus:y.with(()=>s(),i=>{var n;s()!==i&&(s(i),(n=t.onLoadingStatusChange)==null||n.call(t,i))}),id:y.with(()=>o()),ref:y.with(()=>l(),i=>l(i))}),u=P(()=>p(h,g.props));var c=b(),A=w(c);Q(A,()=>t.child,i=>{var n=b(),S=w(n);F(S,()=>t.child,()=>({props:_(u)})),m(i,n)},i=>{var n=Pt();let S;var it=rt(n);F(it,()=>t.children??et),at(n),H(()=>S=W(n,S,{..._(u)})),m(i,n)}),m(e,c),L()}var Tt=J("<img>");function It(e,t){O(t,!0);let r=f(t,"id",19,Z),s=f(t,"ref",15,null),o=f(t,"crossorigin",3,void 0),l=f(t,"referrerpolicy",3,void 0),h=z(t,["$$slots","$$events","$$legacy","src","child","id","ref","crossorigin","referrerpolicy"]);const g=wt({src:y.with(()=>t.src),id:y.with(()=>r()),ref:y.with(()=>s(),i=>s(i)),crossOrigin:y.with(()=>o()),referrerPolicy:y.with(()=>l())}),u=P(()=>p(h,g.props));var c=b(),A=w(c);Q(A,()=>t.child,i=>{var n=b(),S=w(n);F(S,()=>t.child,()=>({props:_(u)})),m(i,n)},i=>{var n=Tt();let S;H(()=>S=W(n,S,{..._(u),src:t.src})),ut(n),dt(n),m(i,n)}),m(e,c),L()}var kt=J("<span><!></span>");function Mt(e,t){O(t,!0);let r=f(t,"id",19,Z),s=f(t,"ref",15,null),o=z(t,["$$slots","$$events","$$legacy","children","child","id","ref"]);const l=bt({id:y.with(()=>r()),ref:y.with(()=>s(),c=>s(c))}),h=P(()=>p(o,l.props));var g=b(),u=w(g);Q(u,()=>t.child,c=>{var A=b(),i=w(A);F(i,()=>t.child,()=>({props:_(h)})),m(c,A)},c=>{var A=kt();let i;var n=rt(A);F(n,()=>t.children??et),at(A),H(()=>i=W(A,i,{..._(h)})),m(c,A)}),m(e,g),L()}function Et(e,t){O(t,!0);let r=f(t,"ref",15,null),s=z(t,["$$slots","$$events","$$legacy","ref","class"]);var o=b(),l=w(o),h=P(()=>X("relative flex size-10 shrink-0 overflow-hidden rounded-full",t.class));N(l,()=>Rt,(g,u)=>{u(g,U({get ref(){return r()},set ref(c){r(c)},get class(){return _(h)}},()=>s))}),m(e,o),L()}function Gt(e,t){O(t,!0);let r=f(t,"ref",15,null),s=z(t,["$$slots","$$events","$$legacy","ref","class"]);var o=b(),l=w(o),h=P(()=>X("aspect-square h-full w-full",t.class));N(l,()=>It,(g,u)=>{u(g,U({get ref(){return r()},set ref(c){r(c)},get class(){return _(h)}},()=>s))}),m(e,o),L()}function Kt(e,t){O(t,!0);let r=f(t,"ref",15,null),s=z(t,["$$slots","$$events","$$legacy","ref","class"]);var o=b(),l=w(o),h=P(()=>X("bg-muted flex h-full w-full items-center justify-center rounded-full",t.class));N(l,()=>Mt,(g,u)=>{u(g,U({get ref(){return r()},set ref(c){r(c)},get class(){return _(h)}},()=>s))}),m(e,o),L()}export{Et as A,Gt as a,Kt as b};
