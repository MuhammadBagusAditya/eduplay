import"../chunks/disclose-version.Bg9kRutz.js";import{p as rt,u as at,t as U,a as st,$ as ot,c as y,f as o,n as g,s as r,g as m,r as h,d as de}from"../chunks/runtime.Bp4x7A-a.js";import{s as lt,c as it,h as nt,i as Se,b as X,d as dt,a as mt}from"../chunks/props.DpK8ESsy.js";import{e as Le,i as Re}from"../chunks/lifecycle.eq67AOaA.js";import{a as e,b as p,c as R,t as w}from"../chunks/template.DQ3Ggw9n.js";import{c as t}from"../chunks/svelte-component.CVO9o64T.js";import{r as je,s as Ie,a as ct,c as ye}from"../chunks/utils.Dqu1-Wdg.js";import{b as ut,a as ft}from"../chunks/input.aIcynM5P.js";import{C as we,a as Ae}from"../chunks/card-content.C5_W8gaf.js";import{B as vt,a as pt,b as me,c as ve,d as pe,e as $t}from"../chunks/breadcrumb-page.BYoj9mJR.js";import{S as Ue}from"../chunks/separator.CWRbQcxc.js";import{R as Ee,T as Je,D as Ke,a as Ne,b as Oe,c as Ve}from"../chunks/index.CrvKBJSA.js";import{s as _t,f as gt,F as ht,C as xt,a as bt,b as Pt}from"../chunks/formData.B4uWq1rj.js";import{B as Ye,b as qe}from"../chunks/button.DODvjd4i.js";import{I as $e}from"../chunks/Icon.CHCRpPhx.js";import{B as Ge}from"../chunks/badge.CBks-o04.js";import"../chunks/legacy.CtaTdtmd.js";import{g as yt}from"../chunks/entry.LQerjGIt.js";import{z as wt}from"../chunks/zod.B2p22QL9.js";import{a as At}from"../chunks/assignments.BePeZ3lL.js";import{t as _e}from"../chunks/Toaster.svelte_svelte_type_style_lang.S0vXD1Br.js";import{p as He}from"../chunks/pb.DLudHD8Y.js";import{D as kt}from"../chunks/dialog-description.BFv0Xkh4.js";var Bt=p("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),Dt=p('<h2 class="mb-4 flex items-center justify-between gap-3 text-lg font-bold text-primary sm:text-xl">Deskripsi tugas <span class="text-sm text-slate-700"> </span></h2> <p class="mb-4 text-sm text-slate-700"> </p> <!>',1),Ft=p('<div class="flex items-center gap-2"><!> <a class="flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-slate-700 underline"> </a></div> <!>',1),zt=p('<h2 class="mb-4 text-lg font-bold text-primary sm:text-xl">Lampiran tugas</h2> <div class="flex flex-col gap-3"></div>',1),Ct=p("<!> <!>",1),Tt=p("<!> <!>",1),St=p("<!> <!>",1),Lt=p('<div class="flex items-center gap-2"><!> <a class="flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-slate-700 underline"> </a> <!></div> <!>',1),Rt=p('<p class="text-center text-slate-700">Tidak ada data</p>'),jt=p("<!> Upload file",1),It=p("<!> <input>",1),Ut=p("<!> <!>",1),Et=p('<form action="?/upload-attachment" method="post" enctype="multipart/form-data"><!> <!> <input type="hidden" name="userAssignment"> <!></form>'),Jt=p("<!> <!>",1),Kt=p('<h2 class="mb-4 text-lg font-bold text-primary sm:text-xl">Lampiran tugas</h2> <div class="flex flex-col gap-3"><!> <!></div>',1),Nt=p('<div class="grid grid-cols-1 grid-rows-[repeat(auto-fit,_max-content)] gap-6 xl:grid-cols-[1fr,_40%]"><!> <header class="relative z-0 col-span-1 overflow-hidden rounded-xl bg-primary px-6 py-4 shadow shadow-slate-900/20 xl:col-span-2"><div class=" flex flex-wrap items-center justify-between gap-4"><h1 class="text-xl font-bold capitalize text-slate-100 sm:text-2xl"> </h1></div></header> <!> <!> <!></div>');function ur(Me,Z){rt(Z,!0);const Qe=lt(),We=()=>mt(Be,"$attachment",Qe),c=it(Z,"data",7),ke=_t(c().attachmentForm,{validators:wt(At)}),Be=gt(ke,"attachment");async function Xe(x){try{if((await fetch("/dashboard/attachments/"+x+"/assignments",{method:"delete",body:JSON.stringify({userAssignment:c().userAssignment.id}),headers:{"Content-Type":"application/json"}})).status>399)throw new Error("");_e.success("Alert",{description:"File berhasil dihapus",dismissable:!0}),yt("/dashboard/assignments/"+c().assignment.id,{invalidateAll:!0})}catch{_e.error("Alert",{description:"Anda tidak memiliki akses untuk menghapus",dismissable:!0})}}at(()=>{var x,A,j;(x=Z.form)!=null&&x.message&&(((j=(A=Z.form)==null?void 0:A.message)==null?void 0:j.variant)==="primary"?_e.success("Alert",{description:Z.form.message.text,dismissable:!0}):_e.error("Alert",{description:Z.form.message.text,dismissable:!0}))});var ge=Nt();nt(x=>{U(()=>ot.title=`Eduplay - Tugas ${c().assignment.name??""}`)});var De=y(ge);t(De,()=>vt,(x,A)=>{A(x,{class:"xl:col-span-2",children:(j,xe)=>{var D=R(),Y=o(D);t(Y,()=>pt,(q,G)=>{G(q,{children:(H,be)=>{var F=Bt(),k=o(F);t(k,()=>me,(a,s)=>{s(a,{children:(f,I)=>{var l=R(),b=o(l);t(b,()=>ve,(d,v)=>{v(d,{href:"/dashboard",children:(_,T)=>{g();var P=w("Dashboard");e(_,P)},$$slots:{default:!0}})}),e(f,l)},$$slots:{default:!0}})});var E=r(k,2);t(E,()=>pe,(a,s)=>{s(a,{})});var z=r(E,2);t(z,()=>me,(a,s)=>{s(a,{children:(f,I)=>{var l=R(),b=o(l);t(b,()=>ve,(d,v)=>{v(d,{href:"/dashboard/classes",children:(_,T)=>{g();var P=w("Kelas");e(_,P)},$$slots:{default:!0}})}),e(f,l)},$$slots:{default:!0}})});var i=r(z,2);t(i,()=>pe,(a,s)=>{s(a,{})});var $=r(i,2);t($,()=>me,(a,s)=>{s(a,{children:(f,I)=>{var l=R(),b=o(l),d=de(()=>"/dashboard/classes/"+c().assignment.classroom);t(b,()=>ve,(v,_)=>{_(v,{get href(){return m(d)},class:"capitalize",children:(T,P)=>{g();var S=w();U(()=>{var L;return X(S,(L=c().assignment.expand)==null?void 0:L.classroom.name)}),e(T,S)},$$slots:{default:!0}})}),e(f,l)},$$slots:{default:!0}})});var B=r($,2);t(B,()=>pe,(a,s)=>{s(a,{})});var C=r(B,2);t(C,()=>me,(a,s)=>{s(a,{children:(f,I)=>{var l=R(),b=o(l);t(b,()=>ve,(d,v)=>{v(d,{href:"/dashboard/assignments",children:(_,T)=>{g();var P=w("Tugas");e(_,P)},$$slots:{default:!0}})}),e(f,l)},$$slots:{default:!0}})});var u=r(C,2);t(u,()=>pe,(a,s)=>{s(a,{})});var n=r(u,2);t(n,()=>me,(a,s)=>{s(a,{children:(f,I)=>{var l=R(),b=o(l);t(b,()=>$t,(d,v)=>{v(d,{class:"capitalize",children:(_,T)=>{g();var P=w();U(()=>X(P,c().assignment.name)),e(_,P)},$$slots:{default:!0}})}),e(f,l)},$$slots:{default:!0}})}),e(H,F)},$$slots:{default:!0}})}),e(j,D)},$$slots:{default:!0}})});var he=r(De,2),Fe=y(he),ze=y(Fe),Ze=y(ze,!0);h(ze),h(Fe),h(he);var Ce=r(he,2);t(Ce,()=>we,(x,A)=>{A(x,{children:(j,xe)=>{var D=R(),Y=o(D);t(Y,()=>Ae,(q,G)=>{G(q,{children:(H,be)=>{var F=Dt(),k=o(F),E=r(y(k)),z=y(E,!0);h(E),h(k);var i=r(k,2),$=y(i,!0);h(i);var B=r(i,2);Se(B,()=>c().assignment.status==="open",C=>{Ge(C,{children:(u,n)=>{g();var a=w("Dibuka");e(u,a)},$$slots:{default:!0}})},C=>{Ge(C,{variant:"destructive",children:(u,n)=>{g();var a=w("Ditutup");e(u,a)},$$slots:{default:!0}})}),U(()=>{X(z,(c().userAssignment.grade>0?c().userAssignment.grade:"?")+"/100"),X($,c().assignment.description)}),e(H,F)},$$slots:{default:!0}})}),e(j,D)},$$slots:{default:!0}})});var Te=r(Ce,2);t(Te,()=>we,(x,A)=>{A(x,{children:(j,xe)=>{var D=R(),Y=o(D);t(Y,()=>Ae,(q,G)=>{G(q,{children:(H,be)=>{var F=zt(),k=r(o(F),2);Le(k,21,()=>{var z;return(z=c().assignment.expand)==null?void 0:z.attachments},Re,(z,i)=>{var $=Ft(),B=o($),C=y(B),u=de(()=>m(i).type==="application"?"mdi:file":m(i).type==="image"?"mdi:file-image":m(i).type==="video"?"mdi:file-video":"mdi:file-document-alert");$e(C,{get icon(){return m(u)},class:"text-4xl text-slate-700"});var n=r(C,2);U(()=>Ie(n,"href",He.files.getURL(m(i),m(i).file)));var a=y(n,!0);h(n),h(B);var s=r(B,2);Ue(s,{class:"last:hidden"}),U(()=>X(a,m(i).name)),e(z,$)}),h(k),e(H,F)},$$slots:{default:!0}})}),e(j,D)},$$slots:{default:!0}})});var et=r(Te,2);t(et,()=>we,(x,A)=>{A(x,{class:"xl:col-span-2",children:(j,xe)=>{var D=R(),Y=o(D);t(Y,()=>Ae,(q,G)=>{G(q,{children:(H,be)=>{var F=Kt(),k=r(o(F),2),E=y(k);Se(E,()=>{var i;return((i=c().userAssignment.expand)==null?void 0:i.attachments.length)>0},i=>{var $=R(),B=o($);Le(B,17,()=>{var u;return(u=c().userAssignment.expand)==null?void 0:u.attachments},Re,(u,n)=>{var a=Lt(),s=o(a),f=y(s),I=de(()=>m(n).type==="application"?"mdi:file":m(n).type==="image"?"mdi:file-image":m(n).type==="video"?"mdi:file-video":"mdi:file-document-alert");$e(f,{get icon(){return m(I)},class:"text-4xl text-slate-700"});var l=r(f,2);U(()=>Ie(l,"href",He.files.getURL(m(n),m(n).file)));var b=y(l,!0);h(l);var d=r(l,2);t(d,()=>Ee,(_,T)=>{T(_,{children:(P,S)=>{var L=St(),V=o(L),ce=de(()=>ye(qe({variant:"outline",size:"icon"})));t(V,()=>Je,(K,N)=>{N(K,{get class(){return m(ce)},children:(O,M)=>{$e(O,{icon:"mdi:trash-can-outline",class:"text-destructive"})},$$slots:{default:!0}})});var J=r(V,2);t(J,()=>Ke,(K,N)=>{N(K,{children:(O,M)=>{var ue=Tt(),ee=o(ue);t(ee,()=>Ne,(se,te)=>{te(se,{children:(re,oe)=>{var Q=Ct(),W=o(Q);t(W,()=>Oe,(ie,fe)=>{fe(ie,{children:(ne,tt)=>{g();var Pe=w("Alert");e(ne,Pe)},$$slots:{default:!0}})});var le=r(W,2);t(le,()=>kt,(ie,fe)=>{fe(ie,{children:(ne,tt)=>{g();var Pe=w("Yakin menghapus file?");e(ne,Pe)},$$slots:{default:!0}})}),e(re,Q)},$$slots:{default:!0}})});var ae=r(ee,2);t(ae,()=>Ve,(se,te)=>{te(se,{children:(re,oe)=>{Ye(re,{variant:"destructive",onclick:()=>Xe(m(n).id),children:(Q,W)=>{g();var le=w("Iya");e(Q,le)},$$slots:{default:!0}})},$$slots:{default:!0}})}),e(O,ue)},$$slots:{default:!0}})}),e(P,L)},$$slots:{default:!0}})}),h(s);var v=r(s,2);Ue(v,{class:"last:hidden"}),U(()=>X(b,m(n).name)),e(u,a)}),e(i,$)},i=>{var $=Rt();e(i,$)});var z=r(E,2);t(z,()=>Ee,(i,$)=>{$(i,{children:(B,C)=>{var u=Jt(),n=o(u),a=de(()=>ye(qe({variant:"default"}),"ml-auto w-fit"));t(n,()=>Je,(f,I)=>{I(f,{get class(){return m(a)},children:(l,b)=>{var d=jt(),v=o(d);$e(v,{icon:"mdi:plus",class:"text-xl"}),g(),e(l,d)},$$slots:{default:!0}})});var s=r(n,2);t(s,()=>Ke,(f,I)=>{I(f,{children:(l,b)=>{var d=Et(),v=y(d);t(v,()=>Ne,(S,L)=>{L(S,{children:(V,ce)=>{var J=R(),K=o(J);t(K,()=>Oe,(N,O)=>{O(N,{children:(M,ue)=>{g();var ee=w("Tambah file");e(M,ee)},$$slots:{default:!0}})}),e(V,J)},$$slots:{default:!0}})});var _=r(v,2);t(_,()=>ht,(S,L)=>{L(S,{form:ke,name:"attachment",children:(V,ce)=>{var J=Ut(),K=o(J);t(K,()=>xt,(O,M)=>{M(O,{children:(ee,ae)=>{let se=()=>ae==null?void 0:ae().props;var te=It(),re=o(te);t(re,()=>Pt,(W,le)=>{le(W,{children:(ie,fe)=>{g();var ne=w("File");e(ie,ne)},$$slots:{default:!0}})});var oe=r(re,2);je(oe);let Q;U(()=>Q=ct(oe,Q,{...se(),type:"file",class:ye("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50")})),ft(oe,We,W=>dt(Be,W)),e(ee,te)},$$slots:{default:!0}})});var N=r(K,2);t(N,()=>bt,(O,M)=>{M(O,{class:"[&_*]:text-[0.8rem]"})}),e(V,J)},$$slots:{default:!0}})});var T=r(_,2);je(T);var P=r(T,2);t(P,()=>Ve,(S,L)=>{L(S,{children:(V,ce)=>{Ye(V,{type:"submit",children:(J,K)=>{g();var N=w("Submit");e(J,N)},$$slots:{default:!0}})},$$slots:{default:!0}})}),h(d),ut(T,()=>c().userAssignment.id,S=>c().userAssignment.id=S),e(l,d)},$$slots:{default:!0}})}),e(B,u)},$$slots:{default:!0}})}),h(k),e(H,F)},$$slots:{default:!0}})}),e(j,D)},$$slots:{default:!0}})}),h(ge),U(()=>X(Ze,c().assignment.name)),e(Me,ge),st()}export{ur as component};
