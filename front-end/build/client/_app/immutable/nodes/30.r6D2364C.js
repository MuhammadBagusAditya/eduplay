import"../chunks/disclose-version.Bg9kRutz.js";import{p as Wt,u as Xt,t as O,a as Zt,$ as te,c as Q,f as s,n as p,s as r,g as L,r as W,d as ft}from"../chunks/runtime.Bp4x7A-a.js";import{s as ee,h as re,b as ct,d as ae,a as se}from"../chunks/props.DpK8ESsy.js";import{e as oe,i as le}from"../chunks/lifecycle.eq67AOaA.js";import{a as e,b as c,c as K,t as g}from"../chunks/template.DQ3Ggw9n.js";import{c as t}from"../chunks/svelte-component.CVO9o64T.js";import{s as Et,r as de,a as ie,c as bt}from"../chunks/utils.Dqu1-Wdg.js";import{a as ne}from"../chunks/input.aIcynM5P.js";import{C as It,a as Mt}from"../chunks/card-content.C5_W8gaf.js";import{B as ce,a as me,b as mt,c as vt,d as $t,e as ue}from"../chunks/breadcrumb-page.BYoj9mJR.js";import{S as fe}from"../chunks/separator.CWRbQcxc.js";import{R as Pt,T as yt,D as wt,a as kt,b as At,c as Dt}from"../chunks/index.CrvKBJSA.js";import{R as ve,T as $e,D as _e,G as St,a as pe,b as he,c as Gt}from"../chunks/index.BkimSpTC.js";import{s as ge,f as xe,F as be,C as Pe,a as ye,b as we}from"../chunks/formData.B4uWq1rj.js";import{B as Bt,b as Lt}from"../chunks/button.DODvjd4i.js";import{I as lt}from"../chunks/Icon.CHCRpPhx.js";import"../chunks/legacy.CtaTdtmd.js";import{g as Ut}from"../chunks/entry.LQerjGIt.js";import{z as ke}from"../chunks/zod.B2p22QL9.js";import{b as Ae}from"../chunks/materials.NJk8zR0x.js";import{t as dt}from"../chunks/Toaster.svelte_svelte_type_style_lang.S0vXD1Br.js";import{p as De}from"../chunks/pb.DLudHD8Y.js";import{D as jt}from"../chunks/dialog-description.BFv0Xkh4.js";var Be=c("<!> <!> <!> <!> <!> <!> <!> <!> <!>",1),Fe=c('<!> <a class="text-sm">Edit materi</a>',1),ze=c("<!> <!>",1),Ce=c("<!> <!>",1),Re=c("<!> <!> <!>",1),Te=c("<!> <!>",1),Ee=c("<!> <!>",1),Ie=c("<!> <!>",1),Me=c("<!> <!>",1),Se=c('<h2 class="mb-4 text-lg font-bold text-primary sm:text-xl">Deskripsi materi</h2> <p class="text-sm text-slate-700"> </p>',1),Ge=c("<!> <!>",1),Le=c("<!> <!>",1),Ue=c("<!> <!>",1),je=c('<div class="flex items-center gap-2"><!> <a class="flex-1 overflow-hidden text-ellipsis whitespace-nowrap text-slate-700 underline"> </a> <!></div> <!>',1),He=c("<!> Upload file",1),Ke=c("<!> <input>",1),Ve=c("<!> <!>",1),Ye=c('<form action="?/upload-attachment" method="post" enctype="multipart/form-data"><!> <!> <!></form>'),qe=c("<!> <!>",1),Je=c('<h2 class="mb-4 text-lg font-bold text-primary sm:text-xl">Lampiran materi</h2> <div class="flex flex-col gap-3"><!> <!></div>',1),Ne=c('<div class="grid grid-cols-1 grid-rows-[repeat(auto-fit,_max-content)] gap-6 xl:grid-cols-[1fr,_40%]"><!> <header class="relative z-0 col-span-1 overflow-hidden rounded-xl bg-primary px-6 py-4 shadow shadow-slate-900/20 xl:col-span-2"><div class=" flex flex-wrap items-center justify-between gap-4"><h1 class="text-xl font-bold capitalize text-slate-100 sm:text-2xl"> </h1> <!></div></header> <!> <!></div>');function hr(Ht,v){Wt(v,!0);const Kt=ee(),Vt=()=>se(zt,"$attachment",Kt),Ft=ge(v.data.attachmentForm,{validators:ke(Ae)}),zt=xe(Ft,"attachment");async function Yt(){try{if((await fetch("/dashboard/teachers/materials/"+v.data.material.id,{method:"delete"})).status>399)throw new Error("");dt.success("Alert",{description:"Materi berhasil dihapus",dismissable:!0}),Ut("/dashboard/teachers/classes/"+v.data.material.classroom)}catch{dt.error("Alert",{description:"Anda tidak memiliki akses untuk menghapus",dismissable:!0})}}async function qt(x){try{if((await fetch("/dashboard/teachers/attachments/"+x,{method:"delete"})).status>399)throw new Error("");dt.success("Alert",{description:"File berhasil dihapus",dismissable:!0}),Ut("/dashboard/teachers/materials/"+v.data.material.id,{invalidateAll:!0})}catch{dt.error("Alert",{description:"Anda tidak memiliki akses untuk menghapus",dismissable:!0})}}Xt(()=>{var x,F,U;(x=v.form)!=null&&x.message&&(((U=(F=v.form)==null?void 0:F.message)==null?void 0:U.variant)==="primary"?dt.success("Alert",{description:v.form.message.text,dismissable:!0}):dt.error("Alert",{description:v.form.message.text,dismissable:!0}))});var _t=Ne();re(x=>{O(()=>te.title=`Eduplay - Materi ${v.data.material.name??""}`)});var Ct=Q(_t);t(Ct,()=>ce,(x,F)=>{F(x,{class:"xl:col-span-2",children:(U,gt)=>{var E=K(),X=s(E);t(X,()=>me,(tt,V)=>{V(tt,{children:(Y,st)=>{var j=Be(),k=s(j);t(k,()=>mt,(o,a)=>{a(o,{children:(u,P)=>{var l=K(),i=s(l);t(i,()=>vt,(h,d)=>{d(h,{href:"/dashboard",children:(n,_)=>{p();var f=g("Dashboard");e(n,f)},$$slots:{default:!0}})}),e(u,l)},$$slots:{default:!0}})});var A=r(k,2);t(A,()=>$t,(o,a)=>{a(o,{})});var et=r(A,2);t(et,()=>mt,(o,a)=>{a(o,{children:(u,P)=>{var l=K(),i=s(l);t(i,()=>vt,(h,d)=>{d(h,{href:"/dashboard/teachers/classes",children:(n,_)=>{p();var f=g("Kelas");e(n,f)},$$slots:{default:!0}})}),e(u,l)},$$slots:{default:!0}})});var z=r(et,2);t(z,()=>$t,(o,a)=>{a(o,{})});var $=r(z,2);t($,()=>mt,(o,a)=>{a(o,{children:(u,P)=>{var l=K(),i=s(l),h=ft(()=>{var d;return"/dashboard/teachers/classes/"+((d=v.data.material.expand)==null?void 0:d.classroom.id)});t(i,()=>vt,(d,n)=>{n(d,{get href(){return L(h)},class:"capitalize",children:(_,f)=>{p();var C=g();O(()=>{var y;return ct(C,(y=v.data.material.expand)==null?void 0:y.classroom.name)}),e(_,C)},$$slots:{default:!0}})}),e(u,l)},$$slots:{default:!0}})});var m=r($,2);t(m,()=>$t,(o,a)=>{a(o,{})});var I=r(m,2);t(I,()=>mt,(o,a)=>{a(o,{children:(u,P)=>{var l=K(),i=s(l);t(i,()=>vt,(h,d)=>{d(h,{href:"/dashboard/teachers/materials",children:(n,_)=>{p();var f=g("Materi");e(n,f)},$$slots:{default:!0}})}),e(u,l)},$$slots:{default:!0}})});var b=r(I,2);t(b,()=>$t,(o,a)=>{a(o,{})});var D=r(b,2);t(D,()=>mt,(o,a)=>{a(o,{children:(u,P)=>{var l=K(),i=s(l);t(i,()=>ue,(h,d)=>{d(h,{class:"capitalize",children:(n,_)=>{p();var f=g();O(()=>ct(f,v.data.material.name)),e(n,f)},$$slots:{default:!0}})}),e(u,l)},$$slots:{default:!0}})}),e(Y,j)},$$slots:{default:!0}})}),e(U,E)},$$slots:{default:!0}})});var pt=r(Ct,2),Rt=Q(pt),ht=Q(Rt),Jt=Q(ht,!0);W(ht);var Nt=r(ht,2);t(Nt,()=>Pt,(x,F)=>{F(x,{children:(U,gt)=>{var E=Me(),X=s(E);t(X,()=>ve,(V,Y)=>{Y(V,{children:(st,j)=>{var k=Te(),A=s(k);t(A,()=>$e,(z,$)=>{$(z,{children:(m,I)=>{lt(m,{icon:"mdi:dots-vertical",class:"text-3xl text-slate-300"})},$$slots:{default:!0}})});var et=r(A,2);t(et,()=>_e,(z,$)=>{$(z,{class:"w-56",children:(m,I)=>{var b=K(),D=s(b);t(D,()=>St,(o,a)=>{a(o,{children:(u,P)=>{var l=Re(),i=s(l);t(i,()=>pe,(n,_)=>{_(n,{children:(f,C)=>{p();var y=g("Aksi");e(f,y)},$$slots:{default:!0}})});var h=r(i,2);t(h,()=>he,(n,_)=>{_(n,{})});var d=r(h,2);t(d,()=>St,(n,_)=>{_(n,{children:(f,C)=>{var y=Ce(),R=s(y);t(R,()=>Gt,(w,M)=>{M(w,{children:(T,H)=>{var B=Fe(),S=s(B);lt(S,{icon:"mdi:pencil-outline",class:""});var G=r(S,2);O(()=>Et(G,"href","/dashboard/teachers/materials/"+v.data.material.id+"/edit")),e(T,B)},$$slots:{default:!0}})});var Z=r(R,2);t(Z,()=>Gt,(w,M)=>{M(w,{children:(T,H)=>{var B=ze(),S=s(B);lt(S,{icon:"mdi:trash-can-outline",class:"text-destructive"});var G=r(S,2);t(G,()=>yt,(q,it)=>{it(q,{class:"w-full text-left text-sm text-destructive",children:(J,rt)=>{p();var N=g("Hapus materi");e(J,N)},$$slots:{default:!0}})}),e(T,B)},$$slots:{default:!0}})}),e(f,y)},$$slots:{default:!0}})}),e(u,l)},$$slots:{default:!0}})}),e(m,b)},$$slots:{default:!0}})}),e(st,k)},$$slots:{default:!0}})});var tt=r(X,2);t(tt,()=>wt,(V,Y)=>{Y(V,{children:(st,j)=>{var k=Ie(),A=s(k);t(A,()=>kt,(z,$)=>{$(z,{children:(m,I)=>{var b=Ee(),D=s(b);t(D,()=>At,(a,u)=>{u(a,{children:(P,l)=>{p();var i=g("Alert");e(P,i)},$$slots:{default:!0}})});var o=r(D,2);t(o,()=>jt,(a,u)=>{u(a,{children:(P,l)=>{p();var i=g("Apakah yakin ingin menghapus materi ini?");e(P,i)},$$slots:{default:!0}})}),e(m,b)},$$slots:{default:!0}})});var et=r(A,2);t(et,()=>Dt,(z,$)=>{$(z,{children:(m,I)=>{Bt(m,{variant:"destructive",onclick:Yt,children:(b,D)=>{p();var o=g("Iya");e(b,o)},$$slots:{default:!0}})},$$slots:{default:!0}})}),e(st,k)},$$slots:{default:!0}})}),e(U,E)},$$slots:{default:!0}})}),W(Rt),W(pt);var Tt=r(pt,2);t(Tt,()=>It,(x,F)=>{F(x,{children:(U,gt)=>{var E=K(),X=s(E);t(X,()=>Mt,(tt,V)=>{V(tt,{children:(Y,st)=>{var j=Se(),k=r(s(j),2),A=Q(k,!0);W(k),O(()=>ct(A,v.data.material.description)),e(Y,j)},$$slots:{default:!0}})}),e(U,E)},$$slots:{default:!0}})});var Ot=r(Tt,2);t(Ot,()=>It,(x,F)=>{F(x,{children:(U,gt)=>{var E=K(),X=s(E);t(X,()=>Mt,(tt,V)=>{V(tt,{children:(Y,st)=>{var j=Je(),k=r(s(j),2),A=Q(k);oe(A,17,()=>{var $;return($=v.data.material.expand)==null?void 0:$.attachments},le,($,m)=>{var I=je(),b=s(I),D=Q(b),o=ft(()=>L(m).type==="application"?"mdi:file":L(m).type==="image"?"mdi:file-image":L(m).type==="video"?"mdi:file-video":"mdi:file-document-alert");lt(D,{get icon(){return L(o)},class:"text-4xl text-slate-700"});var a=r(D,2);O(()=>Et(a,"href",De.files.getURL(L(m),L(m).file)));var u=Q(a,!0);W(a);var P=r(a,2);t(P,()=>Pt,(i,h)=>{h(i,{children:(d,n)=>{var _=Ue(),f=s(_),C=ft(()=>bt(Lt({variant:"outline",size:"icon"})));t(f,()=>yt,(R,Z)=>{Z(R,{get class(){return L(C)},children:(w,M)=>{lt(w,{icon:"mdi:trash-can-outline",class:"text-destructive"})},$$slots:{default:!0}})});var y=r(f,2);t(y,()=>wt,(R,Z)=>{Z(R,{children:(w,M)=>{var T=Le(),H=s(T);t(H,()=>kt,(S,G)=>{G(S,{children:(q,it)=>{var J=Ge(),rt=s(J);t(rt,()=>At,(ot,at)=>{at(ot,{children:(nt,xt)=>{p();var ut=g("Alert");e(nt,ut)},$$slots:{default:!0}})});var N=r(rt,2);t(N,()=>jt,(ot,at)=>{at(ot,{children:(nt,xt)=>{p();var ut=g("Yakin menghapus file?");e(nt,ut)},$$slots:{default:!0}})}),e(q,J)},$$slots:{default:!0}})});var B=r(H,2);t(B,()=>Dt,(S,G)=>{G(S,{children:(q,it)=>{Bt(q,{variant:"destructive",onclick:()=>qt(L(m).id),children:(J,rt)=>{p();var N=g("Iya");e(J,N)},$$slots:{default:!0}})},$$slots:{default:!0}})}),e(w,T)},$$slots:{default:!0}})}),e(d,_)},$$slots:{default:!0}})}),W(b);var l=r(b,2);fe(l,{class:"last:hidden"}),O(()=>ct(u,L(m).name)),e($,I)});var z=r(A,2);t(z,()=>Pt,($,m)=>{m($,{children:(I,b)=>{var D=qe(),o=s(D),a=ft(()=>bt(Lt({variant:"default"})));t(o,()=>yt,(P,l)=>{l(P,{get class(){return L(a)},children:(i,h)=>{var d=He(),n=s(d);lt(n,{icon:"mdi:plus",class:"text-xl"}),p(),e(i,d)},$$slots:{default:!0}})});var u=r(o,2);t(u,()=>wt,(P,l)=>{l(P,{children:(i,h)=>{var d=Ye(),n=Q(d);t(n,()=>kt,(C,y)=>{y(C,{children:(R,Z)=>{var w=K(),M=s(w);t(M,()=>At,(T,H)=>{H(T,{children:(B,S)=>{p();var G=g("Tambah file");e(B,G)},$$slots:{default:!0}})}),e(R,w)},$$slots:{default:!0}})});var _=r(n,2);t(_,()=>be,(C,y)=>{y(C,{form:Ft,name:"attachment",children:(R,Z)=>{var w=Ve(),M=s(w);t(M,()=>Pe,(H,B)=>{B(H,{children:(G,q)=>{let it=()=>q==null?void 0:q().props;var J=Ke(),rt=s(J);t(rt,()=>we,(at,nt)=>{nt(at,{children:(xt,ut)=>{p();var Qt=g("File");e(xt,Qt)},$$slots:{default:!0}})});var N=r(rt,2);de(N);let ot;O(()=>ot=ie(N,ot,{...it(),type:"file",class:bt("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50")})),ne(N,Vt,at=>ae(zt,at)),e(G,J)},$$slots:{default:!0}})});var T=r(M,2);t(T,()=>ye,(H,B)=>{B(H,{class:"[&_*]:text-[0.8rem]"})}),e(R,w)},$$slots:{default:!0}})});var f=r(_,2);t(f,()=>Dt,(C,y)=>{y(C,{children:(R,Z)=>{Bt(R,{type:"submit",children:(w,M)=>{p();var T=g("Submit");e(w,T)},$$slots:{default:!0}})},$$slots:{default:!0}})}),W(d),e(i,d)},$$slots:{default:!0}})}),e(I,D)},$$slots:{default:!0}})}),W(k),e(Y,j)},$$slots:{default:!0}})}),e(U,E)},$$slots:{default:!0}})}),W(_t),O(()=>ct(Jt,v.data.material.name)),e(Ht,_t),Zt()}export{hr as component};
